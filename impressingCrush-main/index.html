<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- ‚úÖ Mobile scaling -->
  <title>Happy Birthday Sister ‚ù§Ô∏è</title>
  <link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Short+Stack&amp;family=Homemade+Apple&amp;display=swap'>
  <link rel="stylesheet" href="./style.css">
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow-x: hidden;
    }

    img {
      max-width: 100%; /* ‚úÖ Responsive images */
      height: auto;
    }

    /* Music button responsive */
    #music-toggle {
      position: fixed;
      right: 18px;
      bottom: 18px;
      z-index: 9999;
      background: rgba(255,255,255,0.9);
      border-radius: 50%;
      padding: 10px 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      cursor: pointer;
      font-size: 18px;
      border: none;
    }
    #music-toggle.playing {
      background: #ff6b81;
      color: #fff;
    }
  </style>
</head>
<body>
<!-- A pen by Developer Rahul  -->

<div class="paper heart"></div>

<div class="paper image">
  <p> And I feel so lucky </p>
  <p> to have You as my Sister ‚ù§Ô∏è </p>
  <img src="images/1.jpeg" />
</div>

<div class="paper image">
  <p></p>
  <img src="images/2.jpeg" />
</div>

<div class="paper image">
  <p>You are not just cute </p>
  <p>You are my blessing üòá </p>
  <img src="images/3.jpg" />
</div>

<div class="paper red">
  <p class="p1"> You will always be </p>
  <p class="p2">My Favorite Sister ‚ù§Ô∏è</p>
</div>

<div class="paper">
  <p class="p1">You are Amazing, </p>
  <p class="p1">Caring and Lovely üíñ</p>
</div>

<div class="paper">
  <p class="p1">Drag the papers to move!</p>
</div>

<!-- Background Music -->
<audio id="bg-music" src="music.mp3" loop preload="auto"></audio>
<button id="music-toggle" title="Play / Pause music">üîà</button>

<script src="./script.js"></script>

<script>
  // ‚úÖ Add mobile drag support
  document.querySelectorAll(".paper").forEach(paper => {
    let isDragging = false, offsetX = 0, offsetY = 0;

    function getXY(e) {
      if (e.touches && e.touches.length > 0) {
        return { x: e.touches[0].clientX, y: e.touches[0].clientY };
      } else {
        return { x: e.clientX, y: e.clientY };
      }
    }

    function startDrag(e) {
      isDragging = true;
      const pos = getXY(e);
      offsetX = pos.x - paper.offsetLeft;
      offsetY = pos.y - paper.offsetTop;
      paper.style.position = "absolute";
      paper.style.zIndex = 999;
      e.preventDefault();
    }

    function doDrag(e) {
      if (!isDragging) return;
      const pos = getXY(e);
      paper.style.left = (pos.x - offsetX) + "px";
      paper.style.top = (pos.y - offsetY) + "px";
      e.preventDefault();
    }

    function stopDrag() {
      isDragging = false;
    }

    // Mouse events
    paper.addEventListener("mousedown", startDrag);
    window.addEventListener("mousemove", doDrag);
    window.addEventListener("mouseup", stopDrag);

    // Touch events
    paper.addEventListener("touchstart", startDrag);
    window.addEventListener("touchmove", doDrag);
    window.addEventListener("touchend", stopDrag);
  });

  // ‚úÖ Music toggle code
  (function(){
    const audio = document.getElementById('bg-music');
    const btn = document.getElementById('music-toggle');
    audio.volume = 0.5;

    async function tryPlay() {
      try {
        await audio.play();
        btn.classList.add('playing');
        btn.textContent = 'üîä';
      } catch (err) {
        btn.classList.remove('playing');
        btn.textContent = 'üîà';
      }
    }

    let playedOnce = false;
    function userInteractionHandler() {
      if (!playedOnce) {
        tryPlay();
        playedOnce = true;
        document.removeEventListener('click', userInteractionHandler);
      }
    }
    document.addEventListener('click', userInteractionHandler, {once:true});

    btn.addEventListener('click', async function(e){
      e.stopPropagation();
      if (audio.paused) {
        try {
          await audio.play();
          btn.classList.add('playing');
          btn.textContent = 'üîä';
        } catch (err) {
          alert('Music play failed ‚Äî check file path or browser settings.');
        }
      } else {
        audio.pause();
        btn.classList.remove('playing');
        btn.textContent = 'üîà';
      }
    });
  })();
</script>

</body>
</html>
